(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{115:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return o})),n.d(t,"toc",(function(){return u})),n.d(t,"default",(function(){return c}));var r=n(3),a=n(8),l=(n(0),n(151)),i={title:"selectorFamily(options)",sidebar_label:"selectorFamily()"},o={unversionedId:"api-reference/utils/selectorFamily",id:"api-reference/utils/selectorFamily",isDocsHomePage:!1,title:"selectorFamily(options)",description:"Renvoie une fonction qui renvoie un s\xe9lecteur en lecture seule RecoilValueReadOnly ou en \xe9criture RecoilState.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/api-reference/utils/selectorFamily.md",slug:"/api-reference/utils/selectorFamily",permalink:"/fr/docs/api-reference/utils/selectorFamily",editUrl:"https://github.com/facebookexperimental/Recoil/edit/docs/docs/i18n/fr/docusaurus-plugin-content-docs/current/api-reference/utils/selectorFamily.md",version:"current",sidebar_label:"selectorFamily()",sidebar:"docs",previous:{title:"atomFamily(options)",permalink:"/fr/docs/api-reference/utils/atomFamily"},next:{title:"constSelector(constante)",permalink:"/fr/docs/api-reference/utils/constSelector"}},u=[{value:"Exemple",id:"exemple",children:[]},{value:"Exemple de requ\xeate asynchrone",id:"exemple-de-requ\xeate-asynchrone",children:[]},{value:"Exemple de destruction",id:"exemple-de-destruction",children:[]}],s={toc:u};function c(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(l.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"Renvoie une fonction qui renvoie un s\xe9lecteur en lecture seule ",Object(l.b)("inlineCode",{parentName:"p"},"RecoilValueReadOnly")," ou en \xe9criture ",Object(l.b)("inlineCode",{parentName:"p"},"RecoilState"),"."),Object(l.b)("p",null,"Un ",Object(l.b)("inlineCode",{parentName:"p"},"selectorFamily")," est un mod\xe8le puissant qui est similaire \xe0 un ",Object(l.b)("a",{parentName:"p",href:"/docs/api-reference/core/selector"},Object(l.b)("inlineCode",{parentName:"a"},"s\xe9lecteur")),", mais vous permet de passer des param\xe8tres aux callbacks ",Object(l.b)("inlineCode",{parentName:"p"},"get")," et",Object(l.b)("inlineCode",{parentName:"p"}," set")," d'un ",Object(l.b)("inlineCode",{parentName:"p"},"s\xe9lecteur \xbb. L'utilitaire"),"selectorFamily ()` retourne une fonction qui peut \xeatre appel\xe9e avec des param\xe8tres d\xe9finis par l'utilisateur et renvoie un s\xe9lecteur. Chaque valeur de param\xe8tre unique renverra la m\xeame instance de s\xe9lecteur m\xe9moris\xe9e."),Object(l.b)("hr",null),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-jsx"},"function selectorFamily<T, Parameter>({\n  key: string,\n\n  get: Parameter => ({get: GetRecoilValue}) => Promise<T> | RecoilValue<T> | T,\n\n  dangerouslyAllowMutability?: boolean,\n}): Parameter => RecoilValueReadOnly<T>\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-jsx"},"function selectorFamily<T, Parameter>({\n  key: string,\n\n  get: Parameter => ({get: GetRecoilValue}) => Promise<T> | RecoilValue<T> | T,\n\n  set: Parameter => (\n    {\n      get: GetRecoilValue,\n      set: SetRecoilValue,\n      reset: ResetRecoilValue,\n    },\n    newValue: T | DefaultValue,\n  ) => void,\n\n  dangerouslyAllowMutability?: boolean,\n}): Parameter => RecoilState<T>\n")),Object(l.b)("p",null,"O\xf9"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-jsx"},"type ValueOrUpdater<T> =  T | DefaultValue | ((prevValue: T) => T | DefaultValue);\ntype GetRecoilValue = <T>(RecoilValue<T>) => T;\ntype SetRecoilValue = <T>(RecoilState<T>, ValueOrUpdater<T>) => void;\ntype ResetRecoilValue = <T>(RecoilState<T>) => void;\n")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"key")," - Une cha\xeene unique utilis\xe9e pour identifier l'atome en interne. Cette cha\xeene doit \xeatre unique par rapport aux autres atomes et s\xe9lecteurs dans l'ensemble de l'application."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"get")," - Une fonction qui re\xe7oit un objet de callbacks nomm\xe9s qui retourne la valeur du s\xe9lecteur, identique \xe0 l'interface ",Object(l.b)("inlineCode",{parentName:"li"},"selector()"),". Ceci est encapsul\xe9 par une fonction qui re\xe7oit le param\xe8tre de l'appel de la fonction de famille de s\xe9lecteur."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"set?")," - Une fonction optionnelle qui produira des s\xe9lecteurs inscriptibles lorsqu'ils sont fournis. Ce devrait \xeatre une fonction qui prend un objet de callbacks nomm\xe9s, comme l'interface ",Object(l.b)("inlineCode",{parentName:"li"},"selector()"),". Ceci est \xe0 nouveau encapsul\xe9 par une autre fonction avec obtient les param\xe8tres de l'appel de la fonction de famille de s\xe9lecteur.")),Object(l.b)("hr",null),Object(l.b)("p",null,"Le ",Object(l.b)("inlineCode",{parentName:"p"},"selectorFamily")," fournit essentiellement une carte du param\xe8tre \xe0 un s\xe9lecteur. \xc9tant donn\xe9 que les param\xe8tres sont souvent g\xe9n\xe9r\xe9s sur les sites d'appel \xe0 l'aide de la famille, et que nous voulons que les param\xe8tres \xe9quivalents r\xe9utilisent le m\xeame s\xe9lecteur sous-jacent, il utilise l'\xe9galit\xe9 des valeurs par d\xe9faut au lieu de l'\xe9galit\xe9 des r\xe9f\xe9rences. (Il existe une API instable pour ajuster ce comportement). Cela impose des restrictions sur les types qui peuvent \xeatre utilis\xe9s pour le param\xe8tre. Veuillez utiliser un type primitif ou un objet qui peut \xeatre s\xe9rialis\xe9. Recoil utilise un s\xe9rialiseur personnalis\xe9 qui peut prendre en charge les objets et les tableaux, certains conteneurs (tels que les ensembles et les cartes ES6), est invariant de l'ordre des cl\xe9s d'objet, prend en charge les symboles, les it\xe9rables et utilise les propri\xe9t\xe9s ",Object(l.b)("inlineCode",{parentName:"p"},"toJSON")," pour la s\xe9rialisation personnalis\xe9e (comme celles fournies avec les biblioth\xe8ques comme les conteneurs immuables). L'utilisation de fonctions ou d'objets modifiables, tels que les promesses, dans les param\xe8tres est probl\xe9matique."),Object(l.b)("h2",{id:"exemple"},"Exemple"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-jsx"},"const myNumberState = atom({\n  key: 'MonNumero',\n  default: 2,\n});\n\nconst myMultipliedState = selectorFamily({\n  key: 'MonNumeroMultipli\xe9',\n  get: (multiplier) => ({get}) => {\n    return get(myNumberState) * multiplier;\n  },\n\n  // set optionel\n  set: (multiplier) => ({set}, newValue) => {\n    set(myNumberState, newValue / multiplier);\n  },\n});\n\nfunction MonComposant() {\n  // 2 par d\xe9faut\n  const number = useRecoilValue(myNumberState);\n\n  // 200 par d\xe9faut\n  const multipliedNumber = useRecoilValue(myMultipliedState(100));\n\n  return <div>...</div>;\n}\n")),Object(l.b)("h2",{id:"exemple-de-requ\xeate-asynchrone"},"Exemple de requ\xeate asynchrone"),Object(l.b)("p",null,"Les familles de s\xe9lecteurs sont \xe9galement utiles pour passer des param\xe8tres aux requ\xeates. Notez que l'utilisation d'un s\xe9lecteur pour abstraire des requ\xeates comme celle-ci doit toujours \xeatre des fonctions \xabpures\xbb qui renvoient toujours le m\xeame r\xe9sultat pour un ensemble donn\xe9 d'entr\xe9es et de valeurs de d\xe9pendance. Voir ",Object(l.b)("a",{parentName:"p",href:"/docs/guides/asynchronous-data-queries"},"ce guide")," pour plus d'exemples."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-jsx"},"const myDataQuery = selectorFamily({\n  key: 'MaRequ\xeateDeDonn\xe9es',\n  get: (queryParameters) => async ({get}) => {\n    const response = await asyncDataRequest(queryParameters);\n    if (response.error) {\n      throw response.error;\n    }\n    return response.data;\n  },\n});\n\nfunction MonComposant() {\n  const data = useRecoilValue(myDataQuery({userID: 132}));\n  return <div>...</div>;\n}\n")),Object(l.b)("h2",{id:"exemple-de-destruction"},"Exemple de destruction"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-jsx"},"const formState = atom({\n  key: 'formState',\n  default: {\n    field1: \"1\",\n    field2: \"2\",\n    field3: \"3\",\n  },\n});\n\nconst formFieldState = selectorFamily({\n  key: 'FormField',\n  get: field => ({get}) => get(formState)[field],\n  set: field => ({set}, newValue) =>\n    set(formState, prevState => {...prevState, [field]: newValue}),\n});\n\nconst Component1 = () => {\n  const [value, onChange] = useRecoilState(formFieldState('field1'));\n  return (\n    <>\n      <input value={value} onChange={onChange} />\n      <Component2 />\n    </>\n  );\n}\n\nconst Component2 = () => {\n  const [value, onChange] = useRecoilState(formFieldState('field2'));\n  return (\n    <input value={value} onChange={onChange} />\n  );\n}\n")))}c.isMDXComponent=!0},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return b}));var r=n(0),a=n.n(r);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),c=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,b=p["".concat(i,".").concat(d)]||p[d]||m[d]||l;return n?a.a.createElement(b,o(o({ref:t},s),{},{components:n})):a.a.createElement(b,o({ref:t},s))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=d;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var s=2;s<l;s++)i[s]=n[s];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);