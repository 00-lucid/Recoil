(self.webpackChunkrecoil=self.webpackChunkrecoil||[]).push([[7476],{3905:function(e,r,t){"use strict";t.d(r,{Zo:function(){return p},kt:function(){return f}});var n=t(7294);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=n.createContext({}),s=function(e){var r=n.useContext(c),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},p=function(e){var r=s(e.components);return n.createElement(c.Provider,{value:r},e.children)},u={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},d=n.forwardRef((function(e,r){var t=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(t),f=a,y=d["".concat(c,".").concat(f)]||d[f]||u[f]||i;return t?n.createElement(y,o(o({ref:r},p),{},{components:t})):n.createElement(y,o({ref:r},p))}));function f(e,r){var t=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=d;var l={};for(var c in r)hasOwnProperty.call(r,c)&&(l[c]=r[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=t[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},445:function(e,r,t){"use strict";t.r(r),t.d(r,{frontMatter:function(){return o},metadata:function(){return l},toc:function(){return c},default:function(){return p}});var n=t(2122),a=t(9756),i=(t(7294),t(3905)),o={title:"waitForNone(dependencies)",sidebar_label:"waitForNone()"},l={unversionedId:"api-reference/utils/waitForNone",id:"api-reference/utils/waitForNone",isDocsHomePage:!1,title:"waitForNone(dependencies)",description:"A concurrency helper that returns a set of Loadables for the current state of the requested dependencies.",source:"@site/docs/api-reference/utils/waitForNone.md",sourceDirName:"api-reference/utils",slug:"/api-reference/utils/waitForNone",permalink:"/docs/api-reference/utils/waitForNone",editUrl:"https://github.com/facebookexperimental/Recoil/edit/docs/docs/docs/api-reference/utils/waitForNone.md",version:"current",sidebar_label:"waitForNone()",frontMatter:{title:"waitForNone(dependencies)",sidebar_label:"waitForNone()"},sidebar:"docs",previous:{title:"waitForAllSettled(dependencies)",permalink:"/docs/api-reference/utils/waitForAllSettled"},next:{title:"waitForAny(dependencies)",permalink:"/docs/api-reference/utils/waitForAny"}},c=[{value:"Incremental Loading Example",id:"incremental-loading-example",children:[]}],s={toc:c};function p(e){var r=e.components,t=(0,a.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,n.Z)({},s,t,{components:r,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"A concurrency helper that returns a set of ",(0,i.kt)("a",{parentName:"p",href:"/docs/api-reference/core/Loadable"},(0,i.kt)("inlineCode",{parentName:"a"},"Loadable"),"s")," for the current state of the requested dependencies."),(0,i.kt)("p",null,"The dependencies may either be provided as a tuple array or as named dependencies in an object."),(0,i.kt)("hr",null),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"function waitForNone(dependencies: Array<RecoilValue<>>):\n  RecoilValueReadOnly<UnwrappedArrayOfLoadables>\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"function waitForNone(dependencies: {[string]: RecoilValue<>}):\n  RecoilValueReadOnly<UnwrappedObjectOfLoadables>\n")),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"waitForNone()")," is similar to ",(0,i.kt)("a",{parentName:"p",href:"/docs/api-reference/utils/waitForAll"},(0,i.kt)("inlineCode",{parentName:"a"},"waitForAll()")),", except that it returns immediately and returns a ",(0,i.kt)("a",{parentName:"p",href:"/docs/api-reference/core/Loadable"},(0,i.kt)("inlineCode",{parentName:"a"},"Loadable"))," for each dependency instead of the values directly.  It is similar to ",(0,i.kt)("a",{parentName:"p",href:"/docs/api-reference/utils/noWait"},(0,i.kt)("inlineCode",{parentName:"a"},"noWait()")),", except that it allows requesting multiple dependencies at once."),(0,i.kt)("p",null,"This helper is useful for working with partial data or incrementally updating the UI as different data becomes available."),(0,i.kt)("h3",{id:"incremental-loading-example"},"Incremental Loading Example"),(0,i.kt)("p",null,"This example renders a chart with multiple layers.  Each layer has a potentially expensive data query.  It will render the chart immediately using spinners for each layer that is still pending and will update the chart to add each new layer as the data for that layer comes in.  If any of the layers has an error with the query then only that layer will show an error message and the rest will continue to render."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"function MyChart({layerQueries}: {layerQueries: Array<RecoilValue<Layer>>}) {\n  const layerLoadables = useRecoilValue(waitForNone(layerQueries));\n\n  return (\n    <Chart>\n      {layerLoadables.map((layerLoadable, i) => {\n        switch (layerLoadable.state) {\n          case 'hasValue':\n            return <Layer key={i} data={layerLoadable.contents} />;\n          case 'hasError':\n            return <LayerErrorBadge key={i} error={layerLoadable.contents} />;\n          case 'loading':\n            return <LayerWithSpinner key={i} />;\n        }\n      })}\n    </Chart>\n  );\n}\n\n")))}p.isMDXComponent=!0}}]);